<div ng-controller="ExchangeOverviewController" ng-init="global.getData()">
    <div class="col-xs-9">
      <h1> Active Offers </h1> 
    </div>
    <div class="col-xs-4">
      Time Frame: <select ng-model="selectedTimeframe"  
          ng-change="global.getData(selectedTimeframe)" ng-options="time.value as time.name for time in timeOptions">
      </select>
    </div>
    <h3 ng-show="orderbook.length == 0" class="text-center">Loading...<img src="/assets/img/spinner.gif"></h3>
    <br /><small><h4 ng-hide="orderbook.length == 0"><span class="text-info text-center"> {{orderbook.length}} Total Transacations </span></h4></small>
    <table ng-hide="orderbook.length == 0" class="table table-striped table-hover table-condensed" fixed-header>
      <thead>
          <tr>
            <th>Transaction hash</th>
            <th>Price ({{ activeCurrencyPair[0] + '/' + activeCurrencyPair[1] }}) </th>
            <th>Amount Remaining</th>
            <th>Cost</th>
            <th>Buyer Fee</th>
            <th>Payment Window (Blocks)</th>
            <th></th>
          </tr>
      </thead>
      <tbody>
      <tr ng-repeat="transaction in orderbook" ng-hide="({{transaction.color=='bgc-expired'}} || {{transaction.color=='bgc-done'}} || {{transaction.formatted_amount_available * transaction.formatted_price_per_coin < .00005757}}) && inactive" class="check-element animate-hide">
        <td ng-click="setHashExplorer(transaction)"><a href="/explorer/inspector?view={{transaction.tx_hash}}">{{transaction.tx_hash_concat}}</a></td>
        <td class="number" title="{{transaction.formatted_price_per_coin}}" ng-bind-html="transaction.formatted_price_per_coin | numeraljs: '0,0.00000000'"></td>
        <td class="number" ng-show="{{transaction.color == 'bgc-new'}}" title="{{transaction.formatted_amount_available}}" ng-bind-html="transaction.formatted_amount_available | numeraljs: '0,0.00000000'"></td> 
        <td class="number" ng-show="{{transaction.color == 'bgc-new-accepted'}}" title="{{transaction.formatted_amount_available}}" ng-bind-html="transaction.formatted_amount_available | numeraljs: '0,0.00000000'"></td> 
        <td class="number" ng-show="{{transaction.color == 'bgc-accepted-done'}}" title="{{transaction.formatted_amount_available}}" ng-bind-html="transaction.formatted_amount_available | numeraljs: '0,0.00000000'"></td> 
        <td ng-show="{{transaction.color == 'bgc-expired'}}">User Ended</td> 
        <td ng-show="{{transaction.color == 'bgc-done'}}">Sold Out!</td> 
        <td class="number" title="{{transaction.formatted_amount_available * transaction.formatted_price_per_coin}}" ng-bind-html="transaction.formatted_amount_available*transaction.formatted_price_per_coin | numeraljs: '0,0.00000000'"></td>
        <td class="number" title="{{transaction.formatted_fee_required}}" ng-bind-html="transaction.formatted_fee_required | numeraljs: '0,0.00000000'"></td>
        <td class="number" title="{{transaction.formatted_block_time_limit}}" ng-bind-html="transaction.formatted_block_time_limit | numeraljs: '0,0'"></td>
        <td ng-show="(transaction.tx_hash.length == 64) && transaction.status == null && !(transaction.from_address == selectedAddress)">
          <button class="btn btn-primary btn-sm" ng-hide="{{transaction.color=='bgc-expired'}} || {{transaction.color=='bgc-done'}} || {{transaction.formatted_amount_available * transaction.formatted_price_per_coin < .00005757}}" ng-click="setView('buyOffer', transaction)" type="submit">Accept...</button>   
          <button class="btn btn-primary btn-sm" ng-show="({{transaction.color == 'bgc-new'}} || {{transaction.color == 'bgc-new-accepted'}} || {{transaction.color == 'bgc-accepted-done'}}) && {{transaction.formatted_amount_available * transaction.formatted_price_per_coin < .00005757}}" onclick="alert('We are sorry. The purchase price for the remaining amount falls below the network minimum and cannot be completed. Please choose a different offer.')" type="submit">Accept...</button>
          <td ng-show="transaction.from_address == selectedAddress"> Your offer/purchase </td>
      </td>
      </tr>
      </tbody>
    </table>  
    
  </div>
