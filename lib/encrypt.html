<!DOCTYPE html>
<html>
<head>
<title>encrypt</title>
<script src="bitcoinjs-lib.js"></script>
<script>
	function submit() {
		var wallet = document.forms['main'].wallet.value;
		var priv = document.forms['main'].priv.value
		var pass = document.forms['main'].pass.value

		var key = new Bitcoin.ECKey(priv);
		var enc = key.getEncryptedFormat(pass);

		if(localStorage[wallet]) {
			var walletStored = JSON.parse(localStorage[wallet])

				walletStored.push(enc);
			
		   console.log("wallet ", wallet )
			localStorage[wallet] = JSON.stringify(walletStored);
		} else {
			localStorage[wallet] = JSON.stringify([enc]);
		}
		var renderString = localStorage[wallet].replace(/,/g,'<br>')
      document.getElementById('keys').innerHTML = renderString
	};

	window.onload = function loadWallets() {
     document.getElementById('keys').innerHTML = localStorage['default']

	}
</script>
<meta charset="utf-8"/>
</head>

<body>
<form name=main>
<br>
enter wallet name: <input name=wallet value=default></input>
<br>
enter privkey: <input name=priv></input>
<br>
enter passphrase: <input name=pass></input>
<br>
</form>
<input type=button value=submit onclick=submit()></input>
<br>
available keys (stored, encrypted in localStorage):
<div id=keys></div>
</body>
</html>
